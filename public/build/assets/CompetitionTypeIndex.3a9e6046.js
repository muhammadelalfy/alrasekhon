import{$ as p}from"./jquery.f931fcee.js";import{_ as D,C as I}from"./app.ca0dd7db.js";import{u as C}from"./vue-toastification.f8d70964.js";import{C as c}from"./competition-types.api.037f62e5.js";import"./vue.7bf2bcd0.js";import{a5 as s,o as m,Q as B,R as b,X as r,a as t,V as M,W as i,r as k,e as L,c as y,U as E,F as A,a8 as Q}from"./@vue.ab32a142.js";import{Q as N}from"./@vueup.fdb4c0f7.js";import"./axios.04e16fa0.js";import"./lodash.4aca12d0.js";import"./vue-router.2be6d445.js";import"./js-cookie.31874410.js";import"./pinia.a7a730fe.js";import"./nprogress.e46cbde5.js";import"./element-plus.f4fb2d76.js";import"./lodash-es.2e433212.js";import"./@vueuse.4ac49989.js";import"./@element-plus.6e503c7c.js";import"./@ctrl.82a509e0.js";import"./dayjs.d96dc93a.js";import"./async-validator.1c690774.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.eae1f4bb.js";import"./vue-i18n.0ab86f4b.js";import"./@intlify.20ef3030.js";import"./js-base64.79f56a98.js";import"./pinia-plugin-persistedstate.f4ca662e.js";import"./vue-sweetalert2.891f877f.js";import"./@fortawesome.c9809c2b.js";import"./datatables.net-bs5.e18c8d11.js";import"./datatables.net.c69c83a2.js";import"./datatables.net-responsive-bs5.449cdb0d.js";import"./datatables.net-responsive.2a10a1b3.js";import"./jszip.2c79a5b0.js";import"./pdfmake.45c49c34.js";import"./datatables.net-buttons-bs5.1ab1a926.js";import"./datatables.net-buttons.5f6c1075.js";import"./quill.2b7d1cee.js";import"./quill-delta.565c40c2.js";import"./fast-diff.40237be0.js";import"./lodash.clonedeep.14434a6c.js";import"./lodash.isequal.30baf809.js";const V={name:"CompetitionTypeForm",data(){},props:{id:{type:String,default:"MainAddModal"},ariaLabelledby:String,dataBsBackdrop:String,dataBskeyboard:String,modalDialogScrollable:Boolean,modalDialogCentered:Boolean,modalLg:Boolean,modalFullscreen:Boolean,competitionType:{type:Object},title:{type:String,default:"pages.add_type"}},methods:{clearForm(){this.clearErrors(),this.resetForm(this.competitionType)},resetEditor(){this.$refs.formQuillEditor.resetEditor()},add(){this.submitFormDisabled=!0,c.store(this.competitionType).then(({data:e})=>{C().success(this.$t("messages.success")),this.submitFormDisabled=!1,p("#MainAddModal").modal("hide"),this.afterModalAddActions(this.competitionType,this.$parent.competitionTypes,e.data),this.clearEditorContent()}).catch(e=>{this.formErrors=e.response.data.errors})},update(){this.submitFormDisabled=!0,c.update(this.competitionType).then(({data:e})=>{C().success(this.$t("messages.success")),this.submitFormDisabled=!1,p("#MainAddModal").modal("hide"),this.afterModalUpdateActions(this.competitionType,this.$parent.competitionTypes,e.data,this.competitionType.id),this.clearEditorContent()}).catch(e=>{console.log(e),this.formErrors=e.response.data.errors})},submit(){this.competitionType.id===void 0?this.add():this.update()},clearEditorContent(){p(".ql-editor").html("")}}},q={class:"mb-3"},z={class:"form-label"},P={class:"ms-1 text-grayClr"},U={class:"mb-3"},j={class:"form-label"},O={class:"ms-1 text-grayClr"};function W(e,o,a,u,T,l){const h=s("form-input"),f=s("FormQuillEditor"),g=s("form-validation-errors"),F=s("form-modal");return m(),B(F,{id:a.id,"aria-labelledby":a.ariaLabelledby,"modal-dialog-centered":a.modalDialogCentered,"modal-lg":a.modalLg,onClearForm:l.clearForm,onResetForm:e.resetForm,onSubmit:l.submit,buttonDisabled:e.submitFormDisabled,title:a.title},{default:b(()=>[r(h,{label:"pages.competition_type_ar",type:"text",model:this.competitionType.name,name:"ar",errors:e.formErrors,error_key:"name.ar",onClearErrors:o[0]||(o[0]=d=>e.clearInput("name.ar"))},null,8,["model","errors"]),r(h,{label:"pages.competition_type_en",type:"text",model:this.competitionType.name,name:"en",errors:e.formErrors,error_key:"name.en",onClearErrors:o[1]||(o[1]=d=>e.clearInput("name.en"))},null,8,["model","errors"]),t("div",q,[t("label",z,[M(i(e.$t("pages.desc"))+" (AR) ",1),t("span",P,"( "+i(e.$t("pages.optional"))+" )",1)]),r(f,{model:this.competitionType.description,name:"ar",ref:"description_ar",onClick:o[2]||(o[2]=d=>e.clearInput("description.ar"))},null,8,["model"]),r(g,{errors:e.formErrors,name:"description.ar"},null,8,["errors"])]),t("div",U,[t("label",j,[M(i(e.$t("pages.desc"))+" (EN) ",1),t("span",O,"( "+i(e.$t("pages.optional"))+" )",1)]),r(f,{model:this.competitionType.description,name:"en",ref:"description_en",onClick:o[3]||(o[3]=d=>e.clearInput("description.en"))},null,8,["model"]),r(g,{errors:e.formErrors,name:"description.en"},null,8,["errors"])])]),_:1},8,["id","aria-labelledby","modal-dialog-centered","modal-lg","onClearForm","onResetForm","onSubmit","buttonDisabled","title"])}const X=D(V,[["render",W],["__file","E:/Roqay/Rasekhon/rasekhon/resources/app/views/settings/competition-types/CompetitionTypeForm.vue"]]),G={components:{Card:I,QuillEditor:N,CompetitionTypeForm:X},setup(){const e=k(!0),o=k({name:{ar:"",en:""},description:{ar:"",en:""}});return L(()=>{p("#modal-btn").on("click",function(){e.value=!0})}),{isAdd:e,competitionType:o}},data(){return{statusAction:{status:!1},filters:{page:1},pagination:{},competitionTypes:[]}},methods:{getCompetitionTypes(e=1){this.filters.page=e,c.list(this.filters).then(({data:o})=>{this.competitionTypes=o.data,this.pagination=o.meta}).catch(o=>{console.log(o)})},groupForm(e={}){e.id?(this.title="pages.edit_type",this.competitionType=_.cloneDeep(e)):this.title="pages.add_type",p("#MainAddModal").modal("show")},clearForm(){this.clearErrors()},delCompetitionType(e,o){c.delete(e).then(a=>{this.competitionTypes.splice(o,1),C().success(a.data.message)})},toggle(e={}){c.changeStatus(e).then(o=>{C().success(o.data.message)})}},created(){this.getCompetitionTypes()}},H={id:"formFilter",class:"collapse multi-collapse"},J=t("th",null,"#",-1),K={class:"btn-list d-inline-flex"},Y=["title"],Z=["onClick"];function x(e,o,a,u,T,l){const h=s("filters"),f=s("card"),g=s("form-switcher"),F=s("font-awesome-icon"),d=s("delete-button"),S=s("DataTable"),w=s("Card"),R=s("CompetitionTypeForm");return m(),y(A,null,[t("div",H,[r(f,null,{body:b(()=>[r(h,{onSubmit:l.getCompetitionTypes,model:T.filters},null,8,["onSubmit","model"])]),_:1})]),r(w,{class:"pt-3"},{default:b(()=>[r(S,null,{default:b(()=>[t("thead",null,[t("tr",null,[J,t("th",null,i(e.$t("pages.name")),1),t("th",null,i(e.$t("pages.desc")),1),t("th",null,i(e.$t("pages.last_update")),1),t("th",null,i(e.$t("pages.status")),1),t("th",null,i(e.$t("global.actions")),1)])]),t("tbody",null,[(m(!0),y(A,null,Q(T.competitionTypes,(n,$)=>(m(),y("tr",{key:n.id},[t("td",null,i($+1),1),t("td",null,i(n.name_localized),1),t("td",null,[t("p",null,i(n.description_localized),1)]),t("td",null,i(n.last_update),1),t("td",null,[r(g,{id:"status",model:n,name:"status",errors:e.formErrors,onClearErrors:e.clearInput,onToggle:v=>l.toggle(n)},null,8,["model","errors","onClearErrors","onToggle"])]),t("td",null,[t("div",K,[t("div",{"data-bs-toggle":"tooltip","data-bs-placement":"top",title:e.$t("forms.edit")},[e.hasPermission("update","CompetitionType")?(m(),y("button",{key:0,type:"button",class:"btn btn-light-secondary text-white me-1","data-bs-toggle":"modal","data-bs-target":"#MainAddModal",onClick:v=>{u.isAdd=!1,l.groupForm(n)}},[r(F,{icon:"fa-solid fa-pen-to-square"})],8,Z)):E("v-if",!0)],8,Y),e.hasPermission("delete","CompetitionType")?(m(),B(d,{key:0,onDelModel:v=>l.delCompetitionType(n,$)},null,8,["onDelModel"])):E("v-if",!0)])])]))),128))])]),_:1})]),_:1}),E(" Modal "),r(R,{competitionType:u.competitionType,showButton:!1,title:u.isAdd?e.$t("pages.add_type"):e.$t("pages.edit_type"),id:"MainAddModal","aria-labelledby":"MainAddModalLabel","modal-dialog-centered":!0,"modal-lg":!0},null,8,["competitionType","title"])],64)}const je=D(G,[["render",x],["__file","E:/Roqay/Rasekhon/rasekhon/resources/app/views/settings/competition-types/CompetitionTypeIndex.vue"]]);export{je as default};
