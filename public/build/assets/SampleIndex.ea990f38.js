import{B as O,_ as k,C as R}from"./app.ca0dd7db.js";import{k as U}from"./element-plus.f4fb2d76.js";import{$ as w}from"./jquery.f931fcee.js";import{u as v}from"./vue-toastification.f8d70964.js";import{u as $}from"./vue-i18n.0ab86f4b.js";import"./vue.7bf2bcd0.js";import{a5 as s,o as c,Q as E,R as i,X as l,a as t,W as r,c as g,U as F,r as L,F as D,a8 as N}from"./@vue.ab32a142.js";import{Q as q}from"./@vueup.fdb4c0f7.js";import"./lodash.4aca12d0.js";import"./axios.04e16fa0.js";import"./vue-router.2be6d445.js";import"./js-cookie.31874410.js";import"./pinia.a7a730fe.js";import"./nprogress.e46cbde5.js";import"./js-base64.79f56a98.js";import"./pinia-plugin-persistedstate.f4ca662e.js";import"./dayjs.d96dc93a.js";import"./vue-sweetalert2.891f877f.js";import"./@fortawesome.c9809c2b.js";import"./datatables.net-bs5.e18c8d11.js";import"./datatables.net.c69c83a2.js";import"./datatables.net-responsive-bs5.449cdb0d.js";import"./datatables.net-responsive.2a10a1b3.js";import"./jszip.2c79a5b0.js";import"./pdfmake.45c49c34.js";import"./datatables.net-buttons-bs5.1ab1a926.js";import"./datatables.net-buttons.5f6c1075.js";import"./lodash-es.2e433212.js";import"./@vueuse.4ac49989.js";import"./@element-plus.6e503c7c.js";import"./@ctrl.82a509e0.js";import"./async-validator.1c690774.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.eae1f4bb.js";import"./@intlify.20ef3030.js";import"./quill.2b7d1cee.js";import"./quill-delta.565c40c2.js";import"./fast-diff.40237be0.js";import"./lodash.clonedeep.14434a6c.js";import"./lodash.isequal.30baf809.js";class u extends O{static get entity(){return"samples"}}const z={name:"SampleForm",data(){const{t:e}=$();return{categoryOptions:[{value:"arbitrator",label:e("pages.contract_arbitrator")},{value:"sponsor",label:e("pages.contract_sponsor")},{value:"service_provider",label:e("pages.contract_service_provider")}],file:{filePreview:"",fileName:""}}},props:{id:{type:String,default:"MainAddModal"},ariaLabelledby:String,dataBsBackdrop:String,dataBskeyboard:String,modalDialogScrollable:Boolean,modalDialogCentered:Boolean,modalLg:Boolean,modalFullscreen:Boolean,sample:{type:Object},title:{type:String,default:"pages.add_contract"},data:{type:Array,default:()=>[]}},methods:{clearForm(){this.clearErrors(),this.resetForm(this.sample)},update(){this.submitFormDisabled=!0,u.update(this.sample).then(({data:e})=>{this.sample.attachment="",v().success(this.$t("messages.success")),this.submitFormDisabled=!1,w("#MainAddModal").modal("hide"),this.afterModalUpdateActions(this.sample,this.$parent.samples,e.data,this.sample.id),this.clearFiles()}).catch(e=>{this.formErrors=e.response.data.errors})},add(){this.submitFormDisabled=!0,u.store(this.sample).then(({data:e})=>{this.sample.attachment="",v().success(this.$t("messages.success")),this.submitFormDisabled=!1,w("#MainAddModal").modal("hide"),this.afterModalAddActions(this.sample,this.$parent.samples,e.data),this.clearFiles()}).catch(e=>{this.formErrors=e.response.data.errors})},submit(){this.sample.id===""?this.add():this.update()},getUploadedData(e){this.file.filePreview=e.previewBase64,this.file.fileName=e.name},async handleUpload(e){let a=new FormData;a.append("type","contract_sample"),a.append("attachment",e.file),this.sample.id===""?u.store(a).then(({data:o})=>{this.sample.fileId=o.id,this.sample.attachment="attached"}).catch(o=>{this.formErrors=o.response.data.errors}):u.update(a).then(({data:o})=>{this.sample.fileId=o.id,this.sample.attachment="attached"}).catch(o=>{this.formErrors=o.response.data.errors})},clearFiles(){this.$refs.uploadRef.clearFiles()}}},P={class:"mb-3"},Q={class:"form-label"},T={key:0,class:"invalid-feedback"},V={class:"align-items-center control-bg d-flex flex-wrap justify-content-end w-100"};function j(e,a,o,B,n,m){const h=s("form-input"),_=s("form-select"),b=s("font-awesome-icon"),y=U,f=s("form-modal");return c(),E(f,{id:o.id,"aria-labelledby":o.ariaLabelledby,"modal-dialog-centered":o.modalDialogCentered,"modal-lg":o.modalLg,onClearForm:m.clearForm,onSubmit:m.submit,buttonDisabled:e.submitFormDisabled,title:o.title},{default:i(()=>[l(h,{label:"pages.contract_sample_name_ar",type:"text",model:this.sample.name,name:"ar",errors:e.formErrors,error_key:"name.ar",onClearErrors:a[0]||(a[0]=d=>e.clearInput("name.ar"))},null,8,["model","errors"]),l(h,{label:"pages.contract_sample_name_en",type:"text",model:this.sample.name,name:"en",errors:e.formErrors,error_key:"name.en",onClearErrors:a[1]||(a[1]=d=>e.clearInput("name.en"))},null,8,["model","errors"]),l(_,{title:"pages.category",label:"name",name:"contract_category","collapse-tags":"","collapse-tags-tooltip":"",onChange:a[2]||(a[2]=d=>e.clearInput("contract_category")),model:this.sample,myOptions:n.categoryOptions,errors:e.formErrors},null,8,["model","myOptions","errors"]),t("div",P,[t("label",Q,r(e.$t("pages.attached_contract")),1),l(y,{name:"attachment",accept:"doc,docx,pdf",onFileUploaded:a[3]||(a[3]=d=>m.getUploadedData(d)),ref:"uploadRef",class:"upload-demo","http-request":m.handleUpload,"auto-upload":!0,"before-remove":e.beforeRemoveFunc,limit:1,size:5,onClick:a[4]||(a[4]=d=>{e.clearInput("attachment"),e.clearInput("fileId")})},{trigger:i(()=>[t("div",V,[l(b,{icon:"fa-solid fa-upload"})])]),default:i(()=>[t("ul",null,[e.formErrors.attachment?(c(),g("li",T,r(e.formErrors.attachment[0]),1)):F("v-if",!0)])]),_:1},8,["http-request","before-remove"])])]),_:1},8,["id","aria-labelledby","modal-dialog-centered","modal-lg","onClearForm","onSubmit","buttonDisabled","title"])}const W=k(z,[["render",j],["__file","E:/Roqay/Rasekhon/rasekhon/resources/app/views/settings/samples/SampleForm.vue"]]),X={components:{Card:R,QuillEditor:q,SampleForm:W},data(){const{t:e}=$();return{statusAction:{status:!1},filters:{page:1},pagination:{},samples:[],categoryOptions:[{value:"arbitrator",label:e("pages.contract_arbitrator")},{value:"sponsor",label:e("pages.contract_sponsor")},{value:"service_provider",label:e("pages.contract_service_provider")}],isAdd:L(!0),sample:{id:"",name:{ar:"",en:""},contract_category:"",attachment:"",fileId:""}}},methods:{getSamples(e=1){this.filters.page=e,u.list(this.filters).then(({data:a})=>{this.samples=a.data,this.pagination=a.meta}).catch(a=>{console.log(a)})},clearForm(){this.clearErrors()},delSample(e,a){u.delete(e).then(o=>{this.samples.splice(a,1),v().success(o.data.message)})}},created(){this.getSamples()}},G={id:"formFilter",class:"collapse multi-collapse"},H={class:"col-md-4 col-lg-3"},J={class:"col-md-4 col-lg-3"},K=t("th",null,"#",-1),Y={class:"btn-list d-inline-flex"},Z=["href","title"],x=["title"];function ee(e,a,o,B,n,m){const h=s("form-select"),_=s("form-date-select"),b=s("filters"),y=s("card"),f=s("font-awesome-icon"),d=s("router-link"),C=s("delete-button"),M=s("DataTable"),A=s("Card"),I=s("SampleForm");return c(),g(D,null,[t("div",G,[l(y,null,{body:i(()=>[l(b,{onSubmit:m.getSamples,model:n.filters},{default:i(()=>[t("div",H,[l(h,{title:"pages.category",label:"name",name:"category","collapse-tags":"","collapse-tags-tooltip":"",model:n.filters,myOptions:n.categoryOptions,valueField:"value",labelField:"label"},null,8,["model","myOptions"])]),t("div",J,[l(_,{label:"pages.date",model:n.filters,type:"daterange",name:"SearchDate","range-separator":e.$t("pages.to"),"start-placeholder":e.$t("pages.start_date"),"end-placeholder":e.$t("pages.end_date")},null,8,["model","range-separator","start-placeholder","end-placeholder"])])]),_:1},8,["onSubmit","model"])]),_:1})]),l(A,{class:"pt-3"},{default:i(()=>[l(M,null,{default:i(()=>[t("thead",null,[t("tr",null,[K,t("th",null,r(e.$t("pages.name")),1),t("th",null,r(e.$t("pages.category")),1),t("th",null,r(e.$t("pages.last_update")),1),t("th",null,r(e.$t("pages.date")),1),t("th",null,r(e.$t("global.actions")),1)])]),t("tbody",null,[(c(!0),g(D,null,N(n.samples,(p,S)=>(c(),g("tr",{key:p.id},[t("td",null,r(S+1),1),t("td",null,r(p.name_localized),1),t("td",null,r(p.contract_category_localized),1),t("td",null,r(p.last_update),1),t("td",null,r(p.created_at),1),t("td",null,[t("div",Y,[l(d,{to:"",class:"btn btn-light-babyblue text-white me-1","data-bs-toggle":"tooltip","data-bs-placement":"top",title:e.$t("forms.view")},{default:i(()=>[l(f,{icon:"fa-solid fa-eye"})]),_:1},8,["title"]),t("a",{href:p.file_url,type:"button",class:"btn btn-light-info text-white me-1","data-bs-toggle":"tooltip","data-bs-placement":"top",title:e.$t("forms.download")},[l(f,{icon:"fa-solid fa-download"})],8,Z),t("button",{type:"button",class:"btn btn-light-success text-white me-1","data-bs-toggle":"tooltip","data-bs-placement":"top",title:e.$t("forms.print")},[l(f,{icon:"fa-solid fa-print"})],8,x),e.hasPermission("delete","Sample")?(c(),E(C,{key:0,onDelModel:te=>m.delSample(p,S)},null,8,["onDelModel"])):F("v-if",!0)])])]))),128))])]),_:1})]),_:1}),F(" Modal "),l(I,{sample:n.sample,showButton:!1,title:n.isAdd?e.$t("pages.add_contract"):e.$t("pages.edit_contract"),id:"MainAddModal","aria-labelledby":"MainAddModalLabel","modal-dialog-centered":!0,"modal-lg":!0},null,8,["sample","title"])],64)}const je=k(X,[["render",ee],["__file","E:/Roqay/Rasekhon/rasekhon/resources/app/views/settings/samples/SampleIndex.vue"]]);export{je as default};
