import{$ as C}from"./jquery.f931fcee.js";import{u as U}from"./vue-toastification.f8d70964.js";import{U as f}from"./user.api.fb936cc2.js";import{R as A}from"./role.api.5a5c0e9b.js";import{_ as B,C as P}from"./app.ca0dd7db.js";import{u as $}from"./vue-i18n.0ab86f4b.js";import N from"./UserForm.3478c8d5.js";import"./vue.7bf2bcd0.js";import{a5 as s,o as n,c as h,a as t,X as r,R as m,Q as u,U as c,F as k,W as a,a8 as V}from"./@vue.ab32a142.js";import"./axios.04e16fa0.js";import"./lodash.4aca12d0.js";import"./vue-router.2be6d445.js";import"./js-cookie.31874410.js";import"./pinia.a7a730fe.js";import"./nprogress.e46cbde5.js";import"./element-plus.f4fb2d76.js";import"./lodash-es.2e433212.js";import"./@vueuse.4ac49989.js";import"./@element-plus.6e503c7c.js";import"./@ctrl.82a509e0.js";import"./dayjs.d96dc93a.js";import"./async-validator.1c690774.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.eae1f4bb.js";import"./js-base64.79f56a98.js";import"./pinia-plugin-persistedstate.f4ca662e.js";import"./vue-sweetalert2.891f877f.js";import"./@fortawesome.c9809c2b.js";import"./datatables.net-bs5.e18c8d11.js";import"./datatables.net.c69c83a2.js";import"./datatables.net-responsive-bs5.449cdb0d.js";import"./datatables.net-responsive.2a10a1b3.js";import"./jszip.2c79a5b0.js";import"./pdfmake.45c49c34.js";import"./datatables.net-buttons-bs5.1ab1a926.js";import"./datatables.net-buttons.5f6c1075.js";import"./@vueup.fdb4c0f7.js";import"./quill.2b7d1cee.js";import"./quill-delta.565c40c2.js";import"./fast-diff.40237be0.js";import"./lodash.clonedeep.14434a6c.js";import"./lodash.isequal.30baf809.js";import"./@intlify.20ef3030.js";import"./form-wizard-vue3.8c2d2911.js";import"./city.api.07d82676.js";const q={components:{Card:P,userForm:N},name:"user-index",setup(){const{t:e}=$(),o=[{value:"1",label:e("pages.active")},{value:"0",label:e("pages.notActive")},{value:"all",label:e("pages.all")}];return{t:e,statusOptions:o}},data(){return{statusAction:{status:!1},filters:{page:1},users:[],roles:[],isLoading:!1,pagination:{},user:{},title:"pages.add_new_user"}},created(){this.getUsers(),this.getRoles()},methods:{getUsers(e=1){this.users=[],this.isLoading=!0,this.filters.page=e,f.list(this.filters).then(({data:o})=>{this.isLoading=!1,this.users=o.data}).catch(o=>{this.isLoading=!1,console.log(o)})},getRoles(){A.list().then(({data:e})=>{let o=[];C.each(e.data,function(g,p){o.push({value:p.id,label:p.name})}),console.log(o),this.roles=o}).catch(e=>{console.log(e)})},toggle(e={}){f.changeStatus(e).then(o=>{U().success(o.data.message)})},delUser(e,o){f.delete(e).then(g=>{this.users.splice(o,1),U().success(g.data.message)})},userForm(e={}){e.id?(this.title="pages.edit_user",this.user=_.cloneDeep(e)):this.title="pages.add_new_user",C("#userForm").modal("show")}}},M={id:"formFilter",class:"collapse multi-collapse"},Q={class:"col-md-4 col-lg-3"},W={class:"col-md-4 col-lg-3"},X=t("th",null,"#",-1),j={class:"btn-list d-inline-flex"};function z(e,o,g,p,i,d){const b=s("form-select"),E=s("filters"),R=s("card"),D=s("form-switcher"),v=s("font-awesome-icon"),y=s("router-link"),F=s("delete-button"),I=s("DataTable"),O=s("spinner"),L=s("pagination"),S=s("Card");return n(),h(k,null,[t("div",M,[r(R,null,{body:m(()=>[r(E,{model:i.filters,onSubmit:d.getUsers},{default:m(()=>[t("div",Q,[r(b,{title:"pages.role",label:"name",name:"role",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",onClearErrors:e.clearInput,model:i.filters,myOptions:i.roles,errors:e.formErrors,"label-field":"label","value-field":"value"},null,8,["onClearErrors","model","myOptions","errors"])]),t("div",W,[r(b,{title:"pages.status",label:"name",name:"status",onClearErrors:e.clearInput,model:i.filters,myOptions:p.statusOptions,errors:e.formErrors,"label-field":"label","value-field":"value"},null,8,["onClearErrors","model","myOptions","errors"])])]),_:1},8,["model","onSubmit"])]),_:1})]),i.users.length?(n(),u(S,{key:0,class:"pt-3"},{default:m(()=>[r(I,{id:"new-edit"},{default:m(()=>[t("thead",null,[t("tr",null,[X,t("th",null,a(e.$t("pages.name")),1),t("th",null,a(e.$t("pages.email")),1),t("th",null,a(e.$t("pages.role")),1),t("th",null,a(e.$t("pages.status")),1),t("th",null,a(e.$t("global.actions")),1)])]),t("tbody",null,[(n(!0),h(k,null,V(i.users,(l,w)=>(n(),h("tr",{key:l.id},[t("td",null,a(w+1),1),t("td",null,a(l.first_name+" "+l.second_name),1),t("td",null,a(l.email),1),t("td",null,a(l.roles),1),t("td",null,[r(D,{id:"status",model:l,name:"status",errors:e.formErrors,onClearErrors:e.clearInput,onToggle:T=>d.toggle(l)},null,8,["model","errors","onClearErrors","onToggle"])]),t("td",null,[t("div",j,[r(y,{to:{name:"user-show",params:{id:l.id}},class:"btn btn-light-babyblue text-white me-1","data-bs-toggle":"tooltip","data-bs-placement":"top",title:e.$t("forms.view")},{default:m(()=>[r(v,{icon:"fa-solid fa-eye"})]),_:2},1032,["to","title"]),e.hasPermission("update","User")?(n(),u(y,{key:0,to:`/users/edit/${l.id}`,class:"btn btn-light-secondary text-white me-1","data-bs-toggle":"tooltip","data-bs-placement":"top",title:e.$t("forms.edit")},{default:m(()=>[r(v,{icon:"fa-solid fa-pen-to-square"})]),_:2},1032,["to","title"])):c("v-if",!0),e.hasPermission("delete","User")?(n(),u(F,{key:1,onDelModel:T=>d.delUser(l,w)},null,8,["onDelModel"])):c("v-if",!0)])])]))),128))])]),_:1}),this.$store.loaderStore.loading?(n(),u(O,{key:0})):c("v-if",!0),r(L,{pagination:i.pagination,onPaginate:d.getUsers},null,8,["pagination","onPaginate"])]),_:1})):c("v-if",!0)],64)}const qe=B(q,[["render",z],["__file","E:/Roqay/Rasekhon/rasekhon/resources/app/views/users/UserIndex.vue"]]);export{qe as default};
