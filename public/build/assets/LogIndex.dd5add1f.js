import{b as A,d as B,f as D}from"./element-plus.f4fb2d76.js";import{B as M,H as y,_ as S}from"./app.ca0dd7db.js";import"./vue.7bf2bcd0.js";import{a5 as p,o as i,c as a,X as n,R as d,a as e,W as l,F as m,a8 as u,U as _,Q as c}from"./@vue.ab32a142.js";import"./lodash-es.2e433212.js";import"./@vueuse.4ac49989.js";import"./@element-plus.6e503c7c.js";import"./@ctrl.82a509e0.js";import"./dayjs.d96dc93a.js";import"./axios.04e16fa0.js";import"./async-validator.1c690774.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.eae1f4bb.js";import"./jquery.f931fcee.js";import"./lodash.4aca12d0.js";import"./vue-router.2be6d445.js";import"./js-cookie.31874410.js";import"./pinia.a7a730fe.js";import"./nprogress.e46cbde5.js";import"./vue-toastification.f8d70964.js";import"./vue-i18n.0ab86f4b.js";import"./@intlify.20ef3030.js";import"./js-base64.79f56a98.js";import"./pinia-plugin-persistedstate.f4ca662e.js";import"./vue-sweetalert2.891f877f.js";import"./@fortawesome.c9809c2b.js";import"./datatables.net-bs5.e18c8d11.js";import"./datatables.net.c69c83a2.js";import"./datatables.net-responsive-bs5.449cdb0d.js";import"./datatables.net-responsive.2a10a1b3.js";import"./jszip.2c79a5b0.js";import"./pdfmake.45c49c34.js";import"./datatables.net-buttons-bs5.1ab1a926.js";import"./datatables.net-buttons.5f6c1075.js";import"./@vueup.fdb4c0f7.js";import"./quill.2b7d1cee.js";import"./quill-delta.565c40c2.js";import"./fast-diff.40237be0.js";import"./lodash.clonedeep.14434a6c.js";import"./lodash.isequal.30baf809.js";class v extends M{static get entity(){return"settings/logs"}static async getModulesActions(){return await y.get(this.entity+"/modules-actions")}}class E{static get entity(){return"filters"}static async modelFilters(r,f={}){return await y.get(this.entity+"/"+r,f)}}const U={name:"LogIndex",data(){return{logs:[],modules:[],actions:[],users:[],filters:{page:1},pagination:{}}},methods:{getLogs(o=1){this.filters.page=o,v.list(this.filters).then(({data:r})=>{this.logs=r.data,this.pagination=r.meta})},getFilters(){v.getModulesActions().then(({data:o})=>{this.modules=o.modules,this.actions=o.actions}),E.modelFilters("ActivityLog").then(({data:o})=>{this.users=o.users})}},created(){this.getLogs(),this.getFilters()}},C={class:"breadcrumb-item active","aria-current":"page"},I={class:"row"},N={class:"col-lg-12"},P={class:"card custom-card"},R={class:"card-header rounded-bottom-0 my-3"},$={class:"card-body"},H={class:"col-sm-6 col-md-6"},q={class:"mb-3"},K={class:"col-sm-4 col-md-4"},O={class:"mb-3"},Q={class:"col-sm-4 col-md-4"},W={class:"mb-3"},X={class:"col-sm-4 col-md-4"},j={class:"mb-3"},z={key:0,class:"table-responsive"},G={class:"table table-bordered border text-nowrap mb-0",id:"new-edit"},J=e("th",null,"#",-1),T={key:1,class:"text-danger"};function Z(o,r,f,x,s,b){const k=p("page-header"),V=A,g=B,h=D,L=p("filters"),w=p("spinner"),Y=p("pagination");return i(),a(m,null,[n(k,{title:"sidebar.settings",active:!1},{default:d(()=>[e("li",C,l(o.$t("sidebar.logs")),1)]),_:1}),e("div",I,[e("div",N,[e("div",P,[e("div",R,[e("div",$,[n(L,{onSubmit:b.getLogs,model:s.filters,enableKeyword:!1},{default:d(()=>[e("div",H,[e("div",q,[n(V,{modelValue:s.filters.duration,"onUpdate:modelValue":r[0]||(r[0]=t=>s.filters.duration=t),type:"daterange","unlink-panels":"","range-separator":"|",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD","start-placeholder":o.$t("pages.date_from"),"end-placeholder":o.$t("pages.date_to")},null,8,["modelValue","start-placeholder","end-placeholder"])])]),e("div",K,[e("div",O,[n(h,{modelValue:s.filters.user,"onUpdate:modelValue":r[1]||(r[1]=t=>s.filters.user=t),clearable:!0,filterable:!0,placeholder:o.$t("forms.select")+" "+o.$t("pages.user")},{default:d(()=>[(i(!0),a(m,null,u(s.users,t=>(i(),c(g,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])]),e("div",Q,[e("div",W,[n(h,{modelValue:s.filters.module,"onUpdate:modelValue":r[2]||(r[2]=t=>s.filters.module=t),clearable:!0,filterable:!0,placeholder:o.$t("forms.select")+" "+o.$t("pages.module")},{default:d(()=>[(i(!0),a(m,null,u(s.modules,t=>(i(),c(g,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])]),e("div",X,[e("div",j,[n(h,{modelValue:s.filters.action,"onUpdate:modelValue":r[3]||(r[3]=t=>s.filters.action=t),clearable:!0,filterable:!0,placeholder:o.$t("forms.select")+" "+o.$t("pages.action")},{default:d(()=>[(i(!0),a(m,null,u(s.actions,t=>(i(),c(g,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])])])]),_:1},8,["onSubmit","model"]),s.logs.length?(i(),a("div",z,[e("table",G,[e("thead",null,[e("tr",null,[J,e("th",null,l(o.$t("pages.action")),1),e("th",null,l(o.$t("pages.module")),1),e("th",null,l(o.$t("pages.message")),1),e("th",null,l(o.$t("pages.by")),1),e("th",null,l(o.$t("pages.date")),1),e("th",null,l(o.$t("pages.time")),1)])]),e("tbody",null,[(i(!0),a(m,null,u(s.logs,(t,F)=>(i(),a("tr",{key:t.id},[e("td",null,l(F+s.pagination.from),1),e("td",null,l(t.action),1),e("td",null,l(t.module),1),e("td",null,l(t.message),1),e("td",null,l(t.by),1),e("td",null,l(t.date),1),e("td",null,l(t.time),1)]))),128))])])])):_("v-if",!0),!s.logs.length&&!this.$store.loaderStore.loading?(i(),a("strong",T,l(o.$t("global.no_results")),1)):_("v-if",!0),this.$store.loaderStore.loading?(i(),c(w,{key:2})):_("v-if",!0),n(Y,{pagination:s.pagination,onPaginate:b.getLogs},null,8,["pagination","onPaginate"])])])])])])],64)}const Ke=S(U,[["render",Z],["__file","E:/Roqay/Rasekhon/rasekhon/resources/app/views/settings/logs/LogIndex.vue"]]);export{Ke as default};
